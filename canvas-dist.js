const $canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),clearBtn=document.querySelector(".clear"),saveBtn=document.querySelector(".save");ctx.lineWidth=4,ctx.lineCap="round";let isPainting=!1;function getPaintPosition(t){const e=$canvas.getBoundingClientRect();return"mousemove"===t.type?{x:t.clientX-e.left,y:t.clientY-e.top}:{x:t.touches[0].clientX-e.left,y:t.touches[0].clientY-e.top}}function startPosition(t){t.preventDefault(),isPainting=!0}function finishedPosition(){isPainting=!1,ctx.beginPath()}function draw(t){if(!isPainting)return;const e=getPaintPosition(t);ctx.lineTo(e.x,e.y),ctx.stroke()}function reset(){ctx.clearRect(0,0,$canvas.width,$canvas.height)}$canvas.addEventListener("mousedown",startPosition),$canvas.addEventListener("mouseup",finishedPosition),$canvas.addEventListener("mouseleave",finishedPosition),$canvas.addEventListener("mousemove",draw),$canvas.addEventListener("touchstart",startPosition),$canvas.addEventListener("touchend",finishedPosition),$canvas.addEventListener("touchcancel",finishedPosition),$canvas.addEventListener("touchmove",draw),clearBtn.addEventListener("click",reset);const showImage=document.querySelector(".show-img");function saveImage(){const t=canvas.toDataURL("image/png");showImage.src=t,localStorage.setItem("image",t)}saveBtn.addEventListener("click",saveImage);